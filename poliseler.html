<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Poliçe Takibi</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
</head>
<body>
  <header>
    <h1>📄 Poliçe Takibi</h1>
    <a href="index.html">← Anasayfa</a>
  </header>

  <main>
    <section>
      <h2>Yeni Poliçe Ekle</h2>
      <form id="policeForm">
        <select id="musteriSec" required>
          <option value="">Müşteri Seçin</option>
        </select>
        <input type="text" id="plaka" placeholder="Plaka (zorunlu)" required>
        <input type="text" id="tescilNo" placeholder="Tescil No (opsiyonel)">
        <input type="text" id="policeTuru" placeholder="Poliçe Türü (Kasko, Trafik...)" required>
        <input type="date" id="baslangicTarihi" required>
        <input type="date" id="bitisTarihi" required>
        <input type="number" id="primTutari" placeholder="Prim Tutarı (₺)" required>
        <input type="text" id="kiminMusterisi" placeholder="Kimin Müşterisi?" required>
        <input type="number" id="kiminKomisyon" placeholder="Kimin Komisyon Oranı (%)" required>
        <input type="text" id="disAcente" placeholder="Dış Acente (Şirket)" required>
        <input type="number" id="disKomisyon" placeholder="Dış Komisyon Oranı (%)" required>
        <button type="submit">Ekle</button>
      </form>
    </section>

    <section>
      <h2>📄 Poliçe Listesi</h2>
      <table id="policeTablo">
        <thead>
          <tr>
            <th>Müşteri</th>
            <th>Plaka</th>
            <th>Tescil No</th>
            <th>Tür</th>
            <th>Bitiş Tarihi</th>
            <th>Prim</th>
            <th>Kimin Müşterisi</th>
            <th>Dış Acente</th>
            <th>İşlem</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <br>
      <button id="jsonExport">📁 JSON Aktar</button>
      <button id="excelExport">📊 Excel Aktar</button>
    </section>

    <!-- 🔧 Poliçe Düzenleme Modalı -->
    <div id="duzenleModal" class="modal">
      <div class="modal-icerik">
        <span class="kapatBtn" id="kapatModal">&times;</span>
        <h2>📝 Poliçe Bilgilerini Güncelle</h2>
        <form id="duzenleForm">
          <input type="text" id="duzenlePoliceTuru" placeholder="Poliçe Türü" required>
          <input type="text" id="duzenlePlaka" placeholder="Plaka (zorunlu)" required>
          <input type="text" id="duzenleTescilNo" placeholder="Tescil No (opsiyonel)">
          <input type="date" id="duzenleBaslangic" required>
          <input type="date" id="duzenleBitis" required>
          <input type="number" id="duzenlePrim" placeholder="Prim Tutarı (₺)" required>
          <input type="text" id="duzenleKimin" placeholder="Kimin Müşterisi?" required>
          <input type="number" id="duzenleKiminKomisyon" placeholder="Kimin Komisyon Oranı (%)" required>
          <input type="text" id="duzenleDis" placeholder="Dış Acente" required>
          <input type="number" id="duzenleDisKomisyon" placeholder="Dış Komisyon Oranı (%)" required>
          <button type="submit">Kaydet</button>
        </form>
      </div>
    </div>
  </main>

  <script src="poliseler.js"></script>
  <script type="module" src="firebase.js"></script>
  <script type="module" src="policeEkle.js"></script>
  <script type="module" src="raporlamaFirebase.js"></script>
  <script type="module" src="poliselerListe.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/xlsx/xlsx.mjs"></script>
</body>
</html>
