<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>PoliÃ§e Takibi</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
</head>
<body>
  <header>
    <h1>ğŸ“„ PoliÃ§e Takibi</h1>
    <a href="index.html">â† Anasayfa</a>
  </header>

  <main>
    <section>
      <h2>Yeni PoliÃ§e Ekle</h2>
      <form id="policeForm">
        <select id="musteriSec" required>
          <option value="">MÃ¼ÅŸteri SeÃ§in</option>
        </select>
        <input type="text" id="plaka" placeholder="Plaka (zorunlu)" required>
        <input type="text" id="tescilNo" placeholder="Tescil No (opsiyonel)">
        <input type="text" id="policeNo" placeholder="PoliÃ§e NumarasÄ± (opsiyonel)">
        <input type="text" id="policeTuru" placeholder="PoliÃ§e TÃ¼rÃ¼ (Kasko, Trafik...)" required>
        <input type="date" id="baslangicTarihi" required>
        <input type="date" id="bitisTarihi" required>
        <input type="number" id="primTutari" placeholder="Prim TutarÄ± (â‚º)" required>
        <input type="text" id="kiminMusterisi" placeholder="Kimin MÃ¼ÅŸterisi?" required>
        <input type="number" id="kiminKomisyon" placeholder="Kimin Komisyon OranÄ± (%)" required>
        <input type="text" id="disAcente" placeholder="DÄ±ÅŸ Acente (Åirket)" required>
        <input type="number" id="disKomisyon" placeholder="DÄ±ÅŸ Komisyon OranÄ± (%)" required>
        <input type="text" id="sirket" placeholder="Sigorta Åirketi (opsiyonel)">
        <button type="submit">Ekle</button>
      </form>
    </section>

    <!-- ğŸ“… Tablodaki filtre iÃ§in tarih aralÄ±ÄŸÄ± -->
    <div style="margin-bottom: 10px;">
      <label for="tabloFiltreBaslangic">BaÅŸlangÄ±Ã§ Tarihi:</label>
      <input type="date" id="tabloFiltreBaslangic">
      <label for="tabloFiltreBitis">BitiÅŸ Tarihi:</label>
      <input type="date" id="tabloFiltreBitis">
      <button id="tarihFiltreleBtn">ğŸ” Tarihe GÃ¶re Filtrele</button>
    </div>

    <section>
      <h2>ğŸ“„ PoliÃ§e Listesi</h2>
      <table id="policeTablo">
        <thead>
          <tr>
            <th>MÃ¼ÅŸteri</th>
            <th>Plaka</th>
            <th>Tescil No</th>
            <th>TÃ¼r</th>
            <th>BitiÅŸ Tarihi</th>
            <th>Prim</th>
            <th>Kimin MÃ¼ÅŸterisi</th>
            <th>DÄ±ÅŸ Acente</th>
            <th>Åirket</th> <!-- âœ… Yeni SÃ¼tun -->
            <th>PoliÃ§e No</th> <!-- ğŸ†• -->
            <th>Ä°ÅŸlem</th>            
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <br>

      <!-- ğŸ“¤ Excel/JSON dÄ±ÅŸa aktarÄ±m iÃ§in filtre -->
      <label>BaÅŸlangÄ±Ã§ Tarihi (filtre):</label>
      <input type="date" id="filtreBaslangic">
      <label>BitiÅŸ Tarihi (filtre):</label>
      <input type="date" id="filtreBitis">
      <button id="jsonExport">ğŸ“ JSON Aktar</button>
      <button id="excelExport">ğŸ“Š Excel Aktar</button>
    </section>

    <!-- ğŸ”§ PoliÃ§e DÃ¼zenleme ModalÄ± -->
    <div id="duzenleModal" class="modal">
      <div class="modal-icerik">
        <span class="kapatBtn" id="kapatModal">&times;</span>
        <h2>ğŸ“ PoliÃ§e Bilgilerini GÃ¼ncelle</h2>
        <form id="duzenleForm">
          <input type="text" id="duzenlePoliceTuru" placeholder="PoliÃ§e TÃ¼rÃ¼" required>
          <input type="text" id="duzenlePlaka" placeholder="Plaka (zorunlu)" required>
          <input type="text" id="duzenleTescilNo" placeholder="Tescil No (opsiyonel)">
          <input type="text" id="duzenlePoliceNo" placeholder="PoliÃ§e NumarasÄ± (opsiyonel)">
          <input type="date" id="duzenleBaslangic" required>
          <input type="date" id="duzenleBitis" required>
          <input type="number" id="duzenlePrim" placeholder="Prim TutarÄ± (â‚º)" required>
          <input type="text" id="duzenleKimin" placeholder="Kimin MÃ¼ÅŸterisi?" required>
          <input type="number" id="duzenleKiminKomisyon" placeholder="Kimin Komisyon OranÄ± (%)" required>
          <input type="text" id="duzenleDis" placeholder="DÄ±ÅŸ Acente" required>
          <input type="number" id="duzenleDisKomisyon" placeholder="DÄ±ÅŸ Komisyon OranÄ± (%)" required>
          <input type="text" id="duzenleSirket" placeholder="Sigorta Åirketi (opsiyonel)">
          <button type="submit">Kaydet</button>
        </form>
      </div>
    </div>
  </main>

  <script src="poliseler.js"></script>
  <script type="module" src="firebase.js"></script>
  <script type="module" src="policeEkle.js"></script>
  <script type="module" src="raporlamaFirebase.js"></script>
  <script type="module" src="poliselerListe.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/xlsx/xlsx.mjs"></script>
</body>
</html>
